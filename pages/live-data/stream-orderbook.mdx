---
title: Stream Order Book (L2 Deltas)
description: WS /v1/stream/orderbook pushes per-level add/replace/remove deltas with a shared sequence.
---

# Stream Order Book (L2 Deltas)

> **WS `/v1/stream/orderbook`** — Stream price-level updates for one or more markets with replace semantics and shared sequence numbers.

- **WebSocket URL:** `wss://stream.predexon.com/v1/stream/orderbook`
- **Auth:** `Authorization: Bearer <token>` header on the WebSocket handshake
- **Time:** All timestamps in messages are **UTC ISO-8601**
- **Rate Limits:** Limit concurrent connections per key; servers may close with `4003` if resubscribe churn exceeds thresholds.

## Connect

<CodeGroup>

```bash cURL
wscat -c "wss://stream.predexon.com/v1/stream/orderbook" \
  -H "Authorization: Bearer $PREDX_TOKEN"
```

```javascript JavaScript
import WebSocket from "ws";

const socket = new WebSocket("wss://stream.predexon.com/v1/stream/orderbook", {
  headers: { Authorization: `Bearer ${process.env.PREDX_TOKEN}` },
});

socket.on("open", () => {
  socket.send(JSON.stringify({
    action: "subscribe",
    markets: ["mkt_evt_election_2026_us_house_gop_control_yesno"],
    venue: "polymarket",
  }));
});
```

```python Python
import json
import os
import websocket

ws = websocket.WebSocket()
ws.connect(
    "wss://stream.predexon.com/v1/stream/orderbook",
    header=[f"Authorization: Bearer {os.environ['PREDX_TOKEN']}"]
)
ws.send(json.dumps({
    "action": "subscribe",
    "markets": ["mkt_evt_election_2026_us_house_gop_control_yesno"],
    "venue": "polymarket"
}))
print(ws.recv())
```

</CodeGroup>

## Subscribe payload

```json
{
  "action": "subscribe",
  "markets": ["mkt_evt_election_2026_us_house_gop_control_yesno"],
  "venue": "polymarket",
  "sequence": 781200
}
```

| Field | Type | Description |
|-------|------|-------------|
| `action` | string | `"subscribe"` or `"unsubscribe"`. |
| `markets` | string[] | List of `market_uid` values to stream. Required for subscribe. |
| `venue` | string (optional) | Restrict updates to a single venue (e.g., `polymarket`, `kalshi`). Omit for all venues. |
| `sequence` | integer (optional) | Resume from a specific sequence (>= latest snapshot). |

## Message schema

```json
{
  "type": "l2_delta",
  "venue": "polymarket",
  "market_uid": "mkt_evt_election_2026_us_house_gop_control_yesno",
  "sequence": 781244,
  "deltas": [
    {
      "outcome": "YES",
      "side": "bid",
      "px": "0.492",
      "qty": "1100"
    }
  ],
  "asof": "2025-10-06T19:21:02Z"
}
```

## Field reference

| Field | Type | Description |
|-------|------|-------------|
| `type` | string | Message type. Always `"l2_delta"`. |
| `venue` | string | Venue code (`polymarket`, `kalshi`) for this update. |
| `market_uid` | string | Market identifier associated with the delta. |
| `sequence` | integer | Monotonic sequence number for ordering and gap detection. |
| `deltas` | array | Collection of price-level updates (replace semantics). |
| `deltas[].outcome` | string | Outcome code (e.g., `YES`, `NO`). |
| `deltas[].side` | string | `"bid"` or `"ask"`. |
| `deltas[].px` | string | Price level, encoded as decimal string. |
| `deltas[].qty` | string | New aggregated quantity at that price (use `"0"` to remove). |
| `asof` | string (ISO-8601) | Timestamp when the update was generated. |

<Info>
**Snapshots and deltas**

- The first message after subscribing is a full snapshot identical to [Order Book](/pages/live-data/orderbook).
- Subsequent messages contain replacement deltas—set your local book to `qty` for each price.
- Always apply messages in `sequence` order; if you detect a gap, grab a fresh snapshot and resubscribe.
</Info>

## Errors & disconnects

| Close Code | Meaning | Recommended Action |
|------------|---------|--------------------|
| `4001` | `invalid_token` | Refresh API token and reconnect. |
| `4002` | `invalid_request` | Malformed subscribe payload. Fix request JSON. |
| `4003` | `rate_limit_exceeded` | Too many subscriptions/unsubscriptions. Slow down. |
| `1011` | Server error | Reconnect with exponential backoff. |

## Best practices

1. **Seed with REST:** Fetch [Order Book](/pages/live-data/orderbook) before subscribing to seed your local depth.
2. **Track sequence per venue:** Persist the latest `sequence` per venue so reconnects can resume without replaying all data.
3. **Apply replace semantics:** Overwrite existing levels with the provided `qty`; remove the level when `qty == "0"`.
4. **Avoid filter churn:** Subscribe once with the full set of markets where possible to minimize rate-limited resubscribes.

## Related

- [Order Book](/pages/live-data/orderbook) — L2 snapshot endpoint
- [Stream Quotes](/pages/live-data/stream-quotes) — Top-of-book streaming
- [Live Data Overview](/pages/live-data/overview) — Streaming conventions and guidelines
